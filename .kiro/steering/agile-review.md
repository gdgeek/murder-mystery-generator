---
inclusion: auto
---

# Agile/SOLID 代码审查原则

编写和审查代码时，始终遵循 Robert C. Martin 的敏捷/SOLID 原则。

## SOLID 原则

- SRP（单一职责）：每个类/模块/函数只有一个变更理由。避免混合关注点（如 I/O 混入业务逻辑）。
- OCP（开闭原则）：对扩展开放，对修改关闭。避免需要修改已有代码才能添加新行为的长 if/switch 链。
- LSP（里氏替换）：子类型必须能替换基类型而不破坏行为。避免违反基类契约的方法重写。
- ISP（接口隔离）：接口应聚焦且面向客户端。避免强迫实现者依赖不需要的方法的"胖接口"。
- DIP（依赖倒置）：高层模块依赖抽象而非具体实现。使用依赖注入，避免硬编码类引用。

## 包/组件原则

- REP：可复用的单元就是发布的单元
- CCP：一起变更的类放在一起
- CRP：一起使用的类放在一起
- ADP：模块间无循环依赖
- SDP：依赖指向稳定方向
- SAP：稳定的包应是抽象的

## 代码坏味道检查

- 僵化性：简单变更是否会级联影响多个模块？
- 脆弱性：一处变更是否会破坏不相关的区域？
- 不可移动性：代码是否因与上下文纠缠而难以复用？
- 粘滞性：做错事是否比做对事更容易？
- 不必要的复杂性：是否存在当前需求不需要的过度设计？
- 不必要的重复：是否存在应合并的重复代码？
- 晦涩性：代码是否难以理解？命名是否清晰？

## 设计模式建议（仅在明确适用时）

- Command：可撤销操作或请求队列
- Strategy：通用接口后的可互换算法
- Template Method：步骤可变的算法
- Facade：简化复杂子系统接口
- Null Object：用空操作实现消除 null 检查
