---
inclusion: auto
---

# Unix 哲学代码审查原则

编写和审查代码时，始终遵循 Eric S. Raymond 的 Unix 哲学。

## 核心规则

1. 模块化：写简单的部分，用干净的接口连接。模块应能独立理解。
2. 清晰性：清晰胜于聪明。避免不必要的技巧，名称应揭示意图。
3. 组合性：设计可与其他程序组合的程序。使用标准可解析格式。
4. 分离性：策略与机制分离，接口与引擎分离。配置不混入核心逻辑。
5. 简洁性：为简洁而设计，仅在必要时增加复杂性。
6. 吝啬性：仅在别无选择时才写大程序。优先拆分为小的独立工具/模块。
7. 透明性：设计可见性，便于检查和调试。内部状态可检视，数据流易追踪。
8. 健壮性：健壮性源于透明和简洁。通过简洁而非特殊逻辑处理边界情况。
9. 表示性：将知识折叠到数据中，让程序逻辑简单健壮。用数据结构替代复杂条件逻辑。
10. 最少惊讶：接口设计做最不令人惊讶的事。避免隐藏副作用和不一致的约定。
11. 沉默性：没有意外要说时就什么都不说。避免正常操作中的过度日志。
12. 修复性：必须失败时，尽早大声失败。不吞没错误，不用回退行为掩盖问题。
13. 经济性：程序员时间昂贵。避免损害可读性的过早优化。
14. 生成性：能写程序生成程序时就不手写。减少重复的样板代码。
15. 优化性：先让它工作，再优化。避免没有证据支持的过早优化。
16. 多样性：不信任"唯一正确方式"。避免不必要的实现锁定。
17. 扩展性：为未来设计。硬编码值应可配置，设计应能容纳新需求。

## 反模式检查

- 文本格式可行时避免二进制数据格式
- 可管道化组件可行时避免单体设计
- 配置与代码分离，行为变更不需重新编译
- 成功时安静，失败时大声（沉默 + 修复规则）
- 不吞没错误，快速失败
